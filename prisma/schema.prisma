generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlserver"
  url      = env("DATABASE_URL")
}

model ActivityLogs {
  ID          BigInt   @id(map: "PK_ActivityLogs") @default(autoincrement())
  OrderNumber String?  @db.NVarChar(50)
  Description String?  @db.NVarChar(Max)
  DateAdded   DateTime @db.DateTime
  CustomerId  BigInt?
  AddressId   BigInt?
  OrderId     BigInt?
}

model ApplicationExceptions {
  ExceptionId         BigInt   @id(map: "PK_ApplicationExceptions") @default(autoincrement())
  ExceptionMethod     String   @db.NVarChar(250)
  ExceptionMessage    String   @db.NVarChar(500)
  ExceptionStackTrace String?  @db.NVarChar(Max)
  ExceptionDateTime   DateTime @db.DateTime
  ExceptionURL        String?  @db.NVarChar(300)
}

model CustomerOrders {
  ID                     BigInt                   @id(map: "PK_CustomerOrders") @default(autoincrement())
  OrderNumber            String                   @db.NVarChar(50)
  BuyerName              String                   @db.NVarChar(500)
  StoreName              String                   @db.NVarChar(500)
  SalesRep               String                   @db.NVarChar(200)
  CustomerEmail          String                   @db.NVarChar(500)
  Country                String                   @db.NVarChar(20)
  CustomerPhone          String                   @db.NVarChar(100)
  OrderAmount            Float
  OrderNotes             String                   @db.NVarChar(Max)
  CustomerPO             String                   @db.NVarChar(100)
  ShipStartDate          DateTime                 @db.DateTime
  ShipEndDate            DateTime                 @db.DateTime
  OrderDate              DateTime                 @db.DateTime
  Website                String                   @db.NVarChar(200)
  IsShipped              Boolean
  OrderStatus            String                   @db.NVarChar(50)
  IsTransferredToShopify Boolean?
  CustomerID             Int?
  RepID                  Int?
  ShopifyOrderID         String?                  @db.NVarChar(50)
  CustomerOrdersComments CustomerOrdersComments[]
  CustomerOrdersItems    CustomerOrdersItems[]
  Shipments              Shipments[]

  @@index([CustomerID], map: "IX_CustomerOrders_CustomerID")
  @@index([OrderDate], map: "IX_CustomerOrders_OrderDate")
  @@index([RepID], map: "IX_CustomerOrders_RepID")
}

model CustomerOrdersComments {
  ID             BigInt         @id(map: "PK_CustomerOrdersComments") @default(autoincrement())
  OrderID        BigInt
  Comments       String         @db.NVarChar(Max)
  AddedDate      DateTime       @db.DateTime
  AddedBy        String         @db.NVarChar(500)
  CustomerOrders CustomerOrders @relation(fields: [OrderID], references: [ID], onUpdate: NoAction, map: "FK_CustomerOrdersComments_CustomerOrders")
}

model CustomerOrdersItems {
  ID              BigInt          @id(map: "PK_CustomerOrdersItems") @default(autoincrement())
  CustomerOrderID BigInt
  OrderNumber     String          @db.NVarChar(50)
  SKU             String          @db.NVarChar(50)
  SKUVariantID    BigInt
  Quantity        Int
  Price           Float
  PriceCurrency   String          @db.NVarChar(50)
  Notes           String          @db.NVarChar(Max)
  CustomerOrders  CustomerOrders  @relation(fields: [CustomerOrderID], references: [ID], onUpdate: NoAction, map: "FK_CustomerOrdersItems_CustomerOrders")
  ShipmentItems   ShipmentItems[]

  @@index([CustomerOrderID], map: "IX_CustomerOrdersItems_CustomerOrderID")
}

model Customers {
  ID                    Int       @id(map: "PK_Customers") @default(autoincrement())
  StoreName             String    @db.NVarChar(500)
  Email                 String?   @db.NVarChar(500)
  CustomerName          String?   @db.NVarChar(500)
  Phone                 String?   @db.NVarChar(500)
  Rep                   String?   @db.NVarChar(500)
  Street1               String?   @db.NVarChar(500)
  Street2               String?   @db.NVarChar(500)
  City                  String?   @db.NVarChar(500)
  StateProvince         String?   @db.NVarChar(500)
  ZipPostal             String?   @db.NVarChar(500)
  Country               String?   @db.NVarChar(500)
  AdditionalInfo        String?   @db.NVarChar(Max)
  ShippingStreet1       String?   @db.NVarChar(500)
  ShippingStreet2       String?   @db.NVarChar(500)
  ShippingCity          String?   @db.NVarChar(500)
  ShippingStateProvince String?   @db.NVarChar(500)
  ShippingZipPostal     String?   @db.NVarChar(500)
  ShippingCountry       String?   @db.NVarChar(500)
  Website               String?   @db.NVarChar(500)
  FirstOrderDate        DateTime? @db.DateTime
  LTV                   Decimal?  @db.Decimal(18, 2)
  Segment               String?   @db.NVarChar(20)
  UsualOrderCycle       Int?
  LastOrderDate         DateTime? @db.DateTime
  OrderCount            Int?      @default(0, map: "DF__Customers__Order__1DB06A4F")
  EstimatedPotential    Decimal?  @db.Decimal(18, 2)

  @@index([LastOrderDate], map: "IX_Customers_LastOrderDate")
  @@index([Segment], map: "IX_Customers_Segment")
}

model CustomersFromShopify {
  ID        BigInt @id(map: "PK_CustomersFromShopify")
  ShopifyID String @db.NVarChar(100)
  Email     String @db.NVarChar(200)
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model DB_Errors {
  ErrorID        Int       @default(autoincrement())
  UserName       String?   @db.VarChar(100)
  ErrorNumber    Int?
  ErrorState     Int?
  ErrorSeverity  Int?
  ErrorLine      Int?
  ErrorProcedure String?   @db.VarChar(Max)
  ErrorMessage   String?   @db.VarChar(Max)
  ErrorDateTime  DateTime? @db.DateTime

  @@ignore
}

model InventorySettings {
  ID                  Int      @id(map: "PK_InventorySettings") @default(autoincrement())
  MinQuantityToShow   Int
  CanadaPassword      String   @db.NVarChar(50)
  USAPassword         String   @db.NVarChar(50)
  CanadaUSAPassword   String?  @db.NVarChar(50)
  AllowMultipleImages Boolean?
  EnableZoom          Boolean?
  ImageRefreshCounter Int
  USDToCADConversion  Float?
  ShowShopifyImages   Boolean?
}

model MissingShopifySkus {
  ID                      BigInt   @id(map: "PK_MissingShopifySkus") @default(autoincrement())
  SkuID                   String   @db.NVarChar(50)
  Description             String   @db.NVarChar(Max)
  Quantity                Int
  Price                   String   @db.NVarChar(50)
  FabricContent           String   @db.NVarChar(500)
  SkuColor                String   @db.NVarChar(50)
  DateAdded               DateTime @db.DateTime
  DateModified            DateTime @db.DateTime
  CategoryID              Int
  PriceCAD                String   @db.NVarChar(50)
  PriceUSD                String   @db.NVarChar(50)
  OrderEntryDescription   String   @db.NVarChar(500)
  MSRPCAD                 String   @db.NVarChar(50)
  MSRPUSD                 String   @db.NVarChar(50)
  Season                  String   @db.NVarChar(500)
  IsReviewed              Boolean
  ShopifyProductVariantId BigInt?
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model MultiCategorySkus {
  SkuId        String?   @db.NVarChar(100)
  SyncOrder    Int?
  MFCollection String?   @db.NVarChar(Max)
  DateAdded    DateTime? @db.DateTime

  @@ignore
}

model OrderDetails {
  ID                  Int    @id(map: "PK_OrderDetails") @default(autoincrement())
  OrderID             Int
  SkuID               String @db.VarChar(50)
  Size                String @db.NVarChar(50)
  Quantity            Int
  TotalAmount         Float
  TotalAmountCurrency String @db.NVarChar(50)
  Orders              Orders @relation(fields: [OrderID], references: [ID], onUpdate: NoAction, map: "FK_OrderDetails_Orders")
}

model Orders {
  ID            Int            @id(map: "PK_Orders") @default(autoincrement())
  DateAdded     DateTime       @default(now(), map: "DF_Orders_DateAdded") @db.DateTime
  OrderAmount   Float
  OrderCurrency String         @db.NVarChar(50)
  CustomerID    Int
  OrderDetails  OrderDetails[]
}

model PPSizes {
  ID              Int    @id(map: "PK_PPSizes") @default(autoincrement())
  Size            Int
  CorrespondingPP String @db.NVarChar(50)
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model PreOrderPriceUpdates {
  Sku      String @db.NVarChar(50)
  PriceUSD Float
  MSRPUSD  Float
  PriceCAD Float
  MSRPCAD  Float

  @@ignore
}

model RawSkusFromShopify {
  ID                                Int     @id(map: "PK_RawSkusFromShopify") @default(autoincrement())
  SkuID                             String  @db.NVarChar(Max)
  Quantity                          Int
  DisplayName                       String  @db.NVarChar(Max)
  Size                              String  @db.NVarChar(Max)
  Price                             Float
  AvailableForSale                  Boolean
  RawShopifyId                      String? @db.NVarChar(Max)
  ShopifyId                         BigInt?
  VariantWeight                     Float?
  VariantWeightUnit                 String? @db.NVarChar(50)
  VariantWeightInGrams              Float?
  productId                         String? @db.NVarChar(500)
  metafield_order_entry_collection  String? @db.NVarChar(200)
  metafield_order_entry_description String? @db.NVarChar(Max)
  metafield_msrp                    String? @db.NVarChar(Max)
  metafield_cad_ws_price            String? @db.NVarChar(Max)
  metafield_features                String? @db.NVarChar(Max)
  metafield_fabric                  String? @db.NVarChar(Max)
  metafield_color                   String? @db.NVarChar(Max)
  colorFromMetafield                String? @db.NVarChar(Max)
  metafield_usd_ws_price            String? @db.NVarChar(Max)
  metafield_cad_ws_price_test       String? @db.NVarChar(Max)
  metafield_msrp_us                 String? @db.NVarChar(Max)
  metafield_msrp_cad                String? @db.NVarChar(Max)
  ShopifyProductImageURL            String? @db.NVarChar(500)
}

model RawSkusInventoryLevelFromShopify {
  ID                BigInt @id(map: "PK_RawSkusInventoryLevelFromShopify") @default(autoincrement())
  InventoryLevelId  String @db.NVarChar(Max)
  Incoming          Int
  ParentId          String @db.NVarChar(Max)
  CommittedQuantity Int?
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model RawSkusVariantFromShopify {
  ID              BigInt    @default(autoincrement())
  ParentID        String?   @db.NVarChar(Max)
  VariantImageUrl String?   @db.NVarChar(Max)
  AddedOn         DateTime? @default(now(), map: "DF_RawSkusVariantFromShopify_AddedOn") @db.DateTime

  @@ignore
}

model Reps {
  ID         Int          @id(map: "PK_Reps") @default(autoincrement())
  Name       String       @db.NVarChar(500)
  Code       String       @db.NVarChar(100)
  Address    String       @db.NVarChar(Max)
  Phone      String       @db.NVarChar(50)
  Fax        String       @db.NVarChar(50)
  Cell       String       @db.NVarChar(50)
  Email1     String       @db.NVarChar(250)
  Email2     String       @db.NVarChar(250)
  Email3     String       @db.NVarChar(250)
  Country    String       @db.NVarChar(50)
  Territory  String?      @db.NVarChar(100)
  RepTargets RepTargets[]
  Users      Users[]
}

model ShopifySyncLog {
  ID              BigInt   @id(map: "PK_ShopifySyncLog") @default(autoincrement())
  RawShopifySkuID String   @db.NVarChar(100)
  SkuID           String   @db.NVarChar(100)
  RawSkuQuantity  Int
  SkuQuantity     Int
  SyncDataTime    DateTime @db.DateTime
  SyncOrder       Int
}

/// Tracks Shopify bulk sync operations (run-level, not per-SKU).
/// Note: This table must be created in production by DBA - see SQL script in plan.
model ShopifySyncRun {
  ID           BigInt    @id(map: "PK_ShopifySyncRun") @default(autoincrement())
  SyncType     String    @db.NVarChar(20)
  Status       String    @db.NVarChar(20)
  OperationId  String?   @db.NVarChar(255)
  StartedAt    DateTime  @db.DateTime
  CompletedAt  DateTime? @db.DateTime
  ItemCount    Int?
  ErrorMessage String?   @db.NVarChar(Max)

  @@index([Status, StartedAt], map: "IX_ShopifySyncRun_Status_StartedAt")
}

model Sku {
  ID                      BigInt         @id(map: "PK_Sku") @default(autoincrement())
  SkuID                   String         @db.VarChar(50)
  Description             String?        @db.NVarChar(Max)
  Quantity                Int?
  Price                   String?        @db.NVarChar(100)
  Size                    String?        @db.NVarChar(50)
  FabricContent           String?        @db.NVarChar(Max)
  SkuColor                String?        @db.NVarChar(400)
  DateAdded               DateTime?      @default(now(), map: "DF_Sku_DateAdded") @db.DateTime
  DateModified            DateTime?      @default(now(), map: "DF_Sku_DateModified") @db.DateTime
  CategoryID              Int?
  OnRoute                 Int?
  PriceCAD                String?        @db.NVarChar(100)
  PriceUSD                String?        @db.NVarChar(100)
  ShowInPreOrder          Boolean?
  OrderEntryDescription   String?        @db.NVarChar(Max)
  MSRPCAD                 String?        @db.NVarChar(100)
  MSRPUSD                 String?        @db.NVarChar(100)
  OnRouteAvailableDate    DateTime?      @db.DateTime
  Season                  String?        @db.NVarChar(500)
  DisplayPriority         Int?
  ShopifyProductVariantId BigInt?
  SyncOrderTemp           Int?
  ShopifyImageURL         String?        @db.NVarChar(500)
  SkuCategories           SkuCategories? @relation(fields: [CategoryID], references: [ID], onDelete: NoAction, onUpdate: NoAction, map: "FK_Sku_SkuCategories")
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model Sku_ForTransformationOnly {
  ID                      BigInt    @default(autoincrement())
  SkuID                   String    @db.VarChar(50)
  Description             String?   @db.NVarChar(Max)
  Quantity                Int?
  Price                   String?   @db.NVarChar(100)
  Size                    String?   @db.NVarChar(50)
  FabricContent           String?   @db.NVarChar(Max)
  SkuColor                String?   @db.NVarChar(400)
  DateAdded               DateTime? @db.DateTime
  DateModified            DateTime? @db.DateTime
  CategoryID              Int?
  OnRoute                 Int?
  PriceCAD                String?   @db.NVarChar(100)
  PriceUSD                String?   @db.NVarChar(100)
  ShowInPreOrder          Boolean?
  OrderEntryDescription   String?   @db.NVarChar(Max)
  MSRPCAD                 String?   @db.NVarChar(100)
  MSRPUSD                 String?   @db.NVarChar(100)
  OnRouteAvailableDate    DateTime? @db.DateTime
  Season                  String?   @db.NVarChar(500)
  DisplayPriority         Int?
  ShopifyProductVariantId BigInt?
  SyncOrderTemp           Int?
  ShopifyImageURL         String?   @db.NVarChar(500)

  @@ignore
}

model SkuCategories {
  ID                      Int               @id(map: "PK_SkuCategory") @default(autoincrement())
  Name                    String            @db.NVarChar(500)
  IsPreOrder              Boolean?
  OnRouteAvailableDate    DateTime?         @db.DateTime
  OnRouteAvailableDateEnd DateTime?         @db.DateTime
  ShopifyOrderTags        String?           @db.NVarChar(Max)
  SortOrder               Int?
  ShopifyImages           Boolean?
  Sku                     Sku[]
  SkuMainSubRship         SkuMainSubRship[]
}

model SkuCategoriesShopify {
  ID                      Int          @id(map: "PK_SkuCategoriesShopify") @default(autoincrement())
  Name                    String       @db.NVarChar(500)
  IsPreOrder              Boolean?
  OnRouteAvailableDate    DateTime?    @db.DateTime
  OnRouteAvailableDateEnd DateTime?    @db.DateTime
  SkuShopify              SkuShopify[]
}

model SkuMainCategory {
  ID              Int               @id(map: "PK_SkuMainCategory") @default(autoincrement())
  Name            String            @db.NVarChar(250)
  DisplayOrder    Int?
  SkuMainSubRship SkuMainSubRship[]
}

model SkuMainSubRship {
  ID              Int             @id(map: "PK_SkuMainSubRship_1") @default(autoincrement())
  SkuMainCatID    Int
  SkuSubCatID     Int
  SkuCategories   SkuCategories   @relation(fields: [SkuSubCatID], references: [ID], onUpdate: NoAction, map: "FK_SkuMainSubRship_SkuCategories")
  SkuMainCategory SkuMainCategory @relation(fields: [SkuMainCatID], references: [ID], onUpdate: NoAction, map: "FK_SkuMainSubRship_SkuMainCategory")
}

model SkuQuantity {
  ID              Int        @id(map: "PK_SkuQuantity") @default(autoincrement())
  SkuID           String     @db.VarChar(50)
  WareHouseID     Int
  ReceiptQuantity Int
  SaleQuantity    Int
  InvoiceQuantity Int
  QuantityLeft    Int
  Warehouses      Warehouses @relation(fields: [WareHouseID], references: [ID], onUpdate: NoAction, map: "FK_SkuQuantity_Warehouses")
}

model SkusFetchedFromQuickbooks {
  ID          Int    @id(map: "PK_SkusFetchedFromQuickbooks") @default(autoincrement())
  Sku         String @db.NVarChar(50)
  Quantity    String @db.NVarChar(50)
  Price       String @db.NVarChar(50)
  Description String @db.NVarChar(500)
  Country     String @db.NVarChar(500)
}

model SkusForQBTest {
  ID           Int       @default(autoincrement())
  SkuID        String    @id(map: "PK_Sku_ID_ForQBTest") @db.VarChar(50)
  Description  String?   @db.NVarChar(Max)
  Quantity     Int?
  Price        String?   @db.NVarChar(100)
  Size         String?   @db.NVarChar(50)
  DateAdded    DateTime? @db.DateTime
  DateModified DateTime? @db.DateTime
  CategoryID   Int?
}

model SkuShopify {
  ID                      BigInt                @id(map: "PK_SkuShopify") @default(autoincrement())
  SkuID                   String                @db.VarChar(50)
  Description             String?               @db.NVarChar(Max)
  Quantity                Int?
  Price                   String?               @db.NVarChar(100)
  Size                    String?               @db.NVarChar(50)
  FabricContent           String?               @db.NVarChar(Max)
  SkuColor                String?               @db.NVarChar(200)
  DateAdded               DateTime?             @default(now(), map: "DF_SkuShopify_DateAdded") @db.DateTime
  DateModified            DateTime?             @default(now(), map: "DF_SkuShopify_DateModified") @db.DateTime
  CategoryID              Int?
  OnRoute                 Int?
  PriceCAD                String?               @db.NVarChar(100)
  PriceUSD                String?               @db.NVarChar(100)
  ShowInPreOrder          Boolean?
  OrderEntryDescription   String?               @db.NVarChar(Max)
  MSRPCAD                 String?               @db.NVarChar(100)
  MSRPUSD                 String?               @db.NVarChar(100)
  OnRouteAvailableDate    DateTime?             @db.DateTime
  Season                  String?               @db.NVarChar(500)
  DisplayPriority         Int?
  ShopifyProductVariantId BigInt?
  SkuCategoriesShopify    SkuCategoriesShopify? @relation(fields: [CategoryID], references: [ID], onDelete: NoAction, onUpdate: NoAction, map: "FK_SkuShopify_SkuCategoriesShopify")
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model tmpJSONOrders {
  vJSON String? @db.NVarChar(Max)
  Id    Int?

  @@ignore
}

model Users {
  ID                Int          @id(map: "PK_Users") @default(autoincrement())
  LoginID           String       @db.NVarChar(50)
  Password          String?      @db.NVarChar(50) // Legacy plaintext - deprecated
  PasswordHash      String?      @db.NVarChar(255) // bcrypt hash
  UserType          String       @db.NVarChar(50)
  RepId             Int?
  Status            String       @default("legacy") @db.NVarChar(20) // invited, active, legacy, disabled
  MustResetPassword Boolean?     @default(true)
  Email             String?      @db.NVarChar(255)
  Reps              Reps?        @relation(fields: [RepId], references: [ID], onDelete: NoAction, onUpdate: NoAction, map: "FK_Users_Reps")
  AuthTokens        AuthTokens[]
}

model AuthTokens {
  ID        Int       @id(map: "PK_AuthTokens") @default(autoincrement())
  UserID    Int
  TokenHash String    @db.NVarChar(255)
  TokenType String    @db.NVarChar(20) // 'invite' or 'password_reset'
  ExpiresAt DateTime  @db.DateTime
  UsedAt    DateTime? @db.DateTime
  CreatedAt DateTime  @default(now()) @db.DateTime
  User      Users     @relation(fields: [UserID], references: [ID], onDelete: Cascade, map: "FK_AuthTokens_Users")

  @@index([TokenHash], map: "IX_AuthTokens_TokenHash")
  @@index([UserID, TokenType], map: "IX_AuthTokens_UserID_Type")
}

model Warehouses {
  ID          Int           @id(map: "PK_Warehouses") @default(autoincrement())
  Name        String        @db.NVarChar(Max)
  SkuQuantity SkuQuantity[]
}

model OrderNumberSequence {
  Prefix     String @id @db.Char(1) // 'A' or 'P'
  LastNumber Int    @default(10000)
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model PG_Desc_OED {
  ID                    String? @db.NVarChar(255)
  SkuID                 String? @db.NVarChar(255)
  Description           String? @db.NVarChar(255)
  Quantity              Float?
  Pack_Size             String? @map("Pack Size") @db.NVarChar(255)
  Price                 String? @db.NVarChar(255)
  Fabric_Content        String? @map("Fabric Content") @db.NVarChar(255)
  SkuColor              String? @db.NVarChar(255)
  DateAdded             String? @db.NVarChar(255)
  DateModified          String? @db.NVarChar(255)
  CategoryID            Float?
  PriceCAD              Float?
  PriceUSD              Float?
  Price_Pack_CAD        Float?  @map("Price Pack CAD")
  Price_Pack_USD        Float?  @map("Price Pack USD")
  OrderEntryDescription String? @db.NVarChar(255)
  MSRPCAD               Float?
  MSRPUSD               Float?
  Season                String? @db.NVarChar(255)
  IsReviewed            String? @db.NVarChar(255)

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model PGSkus20240204 {
  ID                    String? @db.NVarChar(255)
  SkuID                 String? @db.NVarChar(255)
  Description           String? @db.NVarChar(255)
  Quantity              Float?
  Fabric_Content        String? @map("Fabric Content") @db.NVarChar(255)
  SkuColor              String? @db.NVarChar(255)
  DateAdded             String? @db.NVarChar(255)
  DateModified          String? @db.NVarChar(255)
  CategoryID            Float?
  PriceCAD              Float?
  PriceUSD              Float?
  OrderEntryDescription String? @db.NVarChar(255)
  MSRPCAD               Float?
  MSRPUSD               Float?
  Season                String? @db.NVarChar(255)
  IsReviewed            String? @db.NVarChar(255)

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model PPGPrices {
  SkuID        String? @db.NVarChar(255)
  CategoryID   Float?
  PriceCAD     Float?
  PriceUSD     Float?
  PricePackCAD Float?
  PricePackUSD Float?
  MSRPCAD      Float?
  MSRPUSD      Float?

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model PPGPricesN {
  SkuID        String? @db.NVarChar(255)
  CategoryID   Float?
  PriceCAD     Float?
  PriceUSD     Float?
  PricePackCAD Float?
  PricePackUSD Float?
  MSRPCAD      Float?
  MSRPUSD      Float?

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model PPGPricesN_20240110 {
  SkuID        String? @db.NVarChar(255)
  CategoryID   Float?
  PriceCAD     Float?
  PriceUSD     Float?
  PricePackCAD Float?
  PricePackUSD Float?
  MSRPCAD      Float?
  MSRPUSD      Float?

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model PPGPricesN_Modified {
  SkuID        String? @db.NVarChar(255)
  CategoryID   Float?
  PriceCAD     Float?
  PriceUSD     Float?
  PricePackCAD Float?
  PricePackUSD Float?
  MSRPCAD      Float?
  MSRPUSD      Float?

  @@ignore
}

model RepTargets {
  ID           Int       @id(map: "PK__RepTarge__3214EC27E6929715") @default(autoincrement())
  RepID        Int
  PeriodType   String    @db.NVarChar(20)
  PeriodStart  DateTime  @db.DateTime
  TargetAmount Decimal   @db.Decimal(18, 2)
  CreatedAt    DateTime  @default(now(), map: "DF__RepTarget__Creat__208CD6FA") @db.DateTime
  UpdatedAt    DateTime? @db.DateTime
  Reps         Reps      @relation(fields: [RepID], references: [ID], onUpdate: NoAction, map: "FK_RepTargets_Reps")

  @@index([PeriodType, PeriodStart], map: "IX_RepTargets_Period")
  @@index([RepID], map: "IX_RepTargets_RepID")
}

model AliasSignals {
  ID             Int       @id(map: "PK__AliasSig__3214EC27A01A4005") @default(autoincrement())
  EntityType     String    @db.NVarChar(50)
  SelectedValues String    @db.NVarChar(Max)
  ReportType     String    @db.NVarChar(50)
  CreatedBy      Int?
  CreatedAt      DateTime? @default(now(), map: "DF__AliasSign__Creat__245D67DE")
  SessionID      String?   @db.NVarChar(100)

  @@index([CreatedAt], map: "IX_AliasSignals_CreatedAt")
  @@index([EntityType], map: "IX_AliasSignals_EntityType")
  @@index([ReportType], map: "IX_AliasSignals_ReportType")
}

/// Shipment records for orders - tracks what was actually shipped vs ordered
model Shipments {
  ID               BigInt             @id(map: "PK_Shipments") @default(autoincrement())
  CustomerOrderID  BigInt
  ShippedSubtotal  Float              @default(0)
  ShippingCost     Float              @default(0)
  ShippedTotal     Float              @default(0)
  ShipDate         DateTime?          @db.DateTime
  InternalNotes    String?            @db.NVarChar(Max)
  CreatedBy        String             @db.NVarChar(255)
  CreatedAt        DateTime           @default(now()) @db.DateTime
  UpdatedAt        DateTime?          @db.DateTime
  ShopifyFulfillmentID String?        @db.NVarChar(50)
  CustomerOrders   CustomerOrders     @relation(fields: [CustomerOrderID], references: [ID], onUpdate: NoAction, map: "FK_Shipments_CustomerOrders")
  ShipmentItems    ShipmentItems[]
  ShipmentTracking ShipmentTracking[]

  @@index([CustomerOrderID], map: "IX_Shipments_CustomerOrderID")
}

/// Line items included in a shipment - links to order items with quantity shipped
model ShipmentItems {
  ID              BigInt              @id(map: "PK_ShipmentItems") @default(autoincrement())
  ShipmentID      BigInt
  OrderItemID     BigInt
  QuantityShipped Int
  PriceOverride   Float?
  Shipment        Shipments           @relation(fields: [ShipmentID], references: [ID], onUpdate: NoAction, map: "FK_ShipmentItems_Shipments")
  OrderItem       CustomerOrdersItems @relation(fields: [OrderItemID], references: [ID], onUpdate: NoAction, map: "FK_ShipmentItems_CustomerOrdersItems")

  @@index([ShipmentID], map: "IX_ShipmentItems_ShipmentID")
  @@index([OrderItemID], map: "IX_ShipmentItems_OrderItemID")
}

/// Tracking numbers for shipments - supports multiple tracking numbers per shipment
model ShipmentTracking {
  ID             BigInt    @id(map: "PK_ShipmentTracking") @default(autoincrement())
  ShipmentID     BigInt
  Carrier        String    @db.NVarChar(50)
  TrackingNumber String    @db.NVarChar(100)
  AddedAt        DateTime  @default(now()) @db.DateTime
  Shipment       Shipments @relation(fields: [ShipmentID], references: [ID], onUpdate: NoAction, map: "FK_ShipmentTracking_Shipments")

  @@index([ShipmentID], map: "IX_ShipmentTracking_ShipmentID")
}
